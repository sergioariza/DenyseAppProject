<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
		xmlns:s="library://ns.adobe.com/flex/spark"
		actionBarVisible="false"
		backgroundColor="0x000000"
		backgroundAlpha="0.3">
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	<fx:Script>
		<![CDATA[
			import assets.AssetsLibrary;

			import flash.net.navigateToURL;

			import mx.events.FlexEvent;

			import vo.VoShows;

			private var mapGoogleStaticImageURL:String = "http://maps.googleapis.com/maps/api/staticmap?center=";

			private var mapGoogleStaticImageParams:String = "&zoom=18&size=400x400&markers=color:red%7Ccolor:red%7Clabel:%7C";

			private var mapGoogleURL:String = "http://maps.google.com/maps?q=";

			private var voShows:VoShows;

			override public function set data(value:Object):void
			{
				super.data = value;
				voShows = VoShows(value);
			}

			protected function vgroup_creationCompleteHandler(event:FlexEvent):void
			{
				titleShowsLabel.text = voShows.title;
				datePublishedLabel.text = "Fecha de publicación: " + voShows.datePublished;
				bodyLabel.text = voShows.body;
				placeLabel.text = "Lugar: " + voShows.place;
				dateShowLabel.text = "Fecha y hora: " + voShows.dateShow + " " + voShows.hourShow + "h";
				bandsWithLabel.text = "Bandas invitadas: " + voShows.bandsWith;
				googleMapImage.source = mapGoogleStaticImageURL + voShows.latitude.toString() + "," + voShows.length.toString() + mapGoogleStaticImageParams + voShows.latitude.toString() + "," + voShows.length.toString() + "&sensor=true";
			}

			protected function idShowsPhoto_creationCompleteHandler(event:FlexEvent):void
			{
				if (voShows.cache)
				{
					idShowsPhoto.source = voShows.cache;
				}
				else
				{
					idShowsPhoto.source = voShows.photoURL;
				}
			}

			protected function idBitmapImage_clickHandler(event:MouseEvent):void
			{
				navigateToURL(new URLRequest(mapGoogleURL + voShows.latitude.toString() + "," + voShows.length.toString()));
			}
		]]>
	</fx:Script>
	<s:BitmapImage source="{AssetsLibrary.generalBackground}"
				   left="0"
				   alpha="0.6"
				   right="0"
				   width="100%"
				   height="100%"/>
	<s:Scroller width="100%"
				id="idScroller"
				height="100%">
		<s:VGroup horizontalAlign="center"
				  width="100%"
				  creationComplete="vgroup_creationCompleteHandler(event)"
				  gap="0"
				  paddingTop="20"
				  paddingLeft="20"
				  paddingRight="20"
				  paddingBottom="20">
			<s:Label id="titleShowsLabel"
					 styleName="customStyleSpark"
					 textAlign="center"
					 width="100%"
					 fontSize="28"/>
			<s:Spacer height="10"/>
			<s:Group>
				<s:Rect top="0"
						alpha="0.3"
						bottom="0"
						left="0"
						right="0">
					<s:stroke>
						<s:SolidColorStroke color="#000000"
											alpha="0.3"/>
					</s:stroke>
					<s:fill>
						<s:SolidColor color="0x000000"/>
					</s:fill>
				</s:Rect>
				<s:Image id="idShowsPhoto"
						 top="10"
						 left="10"
						 right="10"
						 bottom="10"
						 cacheAsBitmap="true"
						 creationComplete="idShowsPhoto_creationCompleteHandler(event)"
						 horizontalCenter="0"
						 scaleMode="zoom"
						 scaleX="0.6"
						 scaleY="0.6"/>
			</s:Group>
			<s:Spacer height="5"/>
			<s:Label id="datePublishedLabel"
					 textAlign="center"
					 styleName="customStyleSpark"
					 width="100%"
					 fontSize="16"/>
			<s:Spacer height="20"/>
			<s:Label id="bodyLabel"
					 styleName="customStyleSpark"
					 textAlign="justify"
					 width="100%"
					 fontSize="20"/>
			<s:Spacer height="20"/>
			<s:VGroup gap="5"
					  width="100%">
				<s:Label fontSize="20"
						 id="dataShowsLabel"
						 width="100%"
						 styleName="customStyleSpark"
						 textDecoration="underline"
						 text="Información del concierto:"/>
				<s:Spacer height="5"/>
				<s:HGroup>
					<s:Image width="22"
							 cacheAsBitmap="true"
							 height="22"
							 source="{AssetsLibrary.place}"/>
					<s:Label fontSize="20"
							 id="placeLabel"
							 width="100%"
							 styleName="customStyleSpark"/>
				</s:HGroup>
				<s:HGroup>
					<s:Image width="22"
							 cacheAsBitmap="true"
							 height="22"
							 source="{AssetsLibrary.clock}"/>
					<s:Label fontSize="20"
							 width="100%"
							 id="dateShowLabel"
							 styleName="customStyleSpark"/>
				</s:HGroup>
				<s:HGroup>
					<s:Image width="22"
							 cacheAsBitmap="true"
							 height="22"
							 source="{AssetsLibrary.bands}"/>
					<s:Label fontSize="20"
							 width="100%"
							 id="bandsWithLabel"
							 styleName="customStyleSpark"/>
				</s:HGroup>
			</s:VGroup>
			<s:Spacer height="20"/>
			<s:VGroup gap="5"
					  horizontalAlign="center"
					  width="100%">
				<s:Label fontSize="20"
						 width="100%"
						 textDecoration="underline"
						 textAlign="center"
						 styleName="customStyleSpark"
						 text="Mapa del lugar:"/>
				<s:Group>
					<s:Rect top="0"
							alpha="0.3"
							bottom="0"
							left="0"
							right="0">
						<s:stroke>
							<s:SolidColorStroke color="#000000"
												alpha="0.3"/>
						</s:stroke>
						<s:fill>
							<s:SolidColor color="0x000000"/>
						</s:fill>
					</s:Rect>
					<s:Image id="googleMapImage"
							 top="10"
							 left="10"
							 right="10"
							 bottom="10"
							 cacheAsBitmap="true"
							 click="idBitmapImage_clickHandler(event)"
							 verticalCenter="0"
							 horizontalCenter="0"/>
				</s:Group>
				<s:Label fontSize="14"
						 width="100%"
						 textAlign="center"
						 styleName="customStyleSpark"
						 text="Pulsa en el mapa para acceder a Google Maps"/>
			</s:VGroup>
		</s:VGroup>
	</s:Scroller>
	<!--<details:StageWebViewUIComponent id="idStageWebViewUIComponent"
									 xOffset="-1000"
									 addedToStage="addedToStageHandler(event)"
									 yOffset="2300"
									 text="{mapGoogle}"
									 mapHeight="300"
									 mapWidth="300"/>-->
</s:View>
